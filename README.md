# üõí E-Converse

**E-Converse** es un sistema de comercio electr√≥nico completo desarrollado como proyecto acad√©mico.  
Su objetivo es simular una tienda virtual profesional donde los usuarios pueden registrarse, navegar por un cat√°logo de productos, agregarlos al carrito y gestionar pedidos.

El proyecto integra **Backend REST API, Frontend SPA y Base de datos relacional**, aplicando buenas pr√°cticas en el desarrollo de aplicaciones web modernas con arquitectura MVC.

---

## üöÄ Tecnolog√≠as Utilizadas

### Backend
- **Spring Boot 3.5.6** (Java 17)
  - Spring Security con JWT para autenticaci√≥n
  - Spring Data JPA/Hibernate para persistencia
  - API REST con ResponseEntity y manejo de errores
  - CORS configurado para desarrollo local
  - Logging detallado en controladores

### Base de Datos
- **PostgreSQL** (Motor principal)
- **MySQL** (Alternativa compatible)
  - Modelo relacional normalizado
  - Relaciones con cascada para integridad referencial
  - √çndices optimizados para consultas frecuentes

### Frontend
- **Vanilla JavaScript** (ES6+)
  - Sin frameworks para mayor control y aprendizaje
  - Fetch API para consumo de REST endpoints
  - Manejo de estado con LocalStorage
  - Dise√±o responsive sin dependencias

- **HTML5 + CSS3**
  - Dise√±o moderno con gradientes y transiciones
  - Grid y Flexbox para layouts responsive
  - Font Awesome para iconograf√≠a
  - Temas personalizados con variables CSS

---

## üìÇ Estructura del Proyecto

```
Proyecto-Spring-Boot-E-converse/
‚îú‚îÄ‚îÄ backend/
‚îÇ   ‚îú‚îÄ‚îÄ src/main/java/backend/application/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config/          # Configuraci√≥n de seguridad y CORS
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ controller/      # Endpoints REST (8 controladores)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ model/           # Entidades JPA (8 modelos)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ repository/      # Repositorios Spring Data
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ service/         # L√≥gica de negocio
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ seguridad/       # JWT y autenticaci√≥n
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ exception/       # Manejo de excepciones
‚îÇ   ‚îú‚îÄ‚îÄ src/main/resources/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ application.properties  # Configuraci√≥n de BD y JWT
‚îÇ   ‚îî‚îÄ‚îÄ pom.xml              # Dependencias Maven
‚îÇ
‚îî‚îÄ‚îÄ frontend/
    ‚îú‚îÄ‚îÄ views/
    ‚îÇ   ‚îú‚îÄ‚îÄ admin/           # Panel de administraci√≥n
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dashboard.html
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ usuarios.html
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ roles.html
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ categorias.html
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ productos.html
    ‚îÇ   ‚îî‚îÄ‚îÄ client/          # Panel de cliente
    ‚îÇ       ‚îú‚îÄ‚îÄ dashboard.html
    ‚îÇ       ‚îî‚îÄ‚îÄ cart.html
    ‚îú‚îÄ‚îÄ js/                  # L√≥gica JavaScript modular
    ‚îÇ   ‚îú‚îÄ‚îÄ login.js
    ‚îÇ   ‚îú‚îÄ‚îÄ register.js
    ‚îÇ   ‚îú‚îÄ‚îÄ dashboard.js
    ‚îÇ   ‚îú‚îÄ‚îÄ admin-*.js       # Scripts por m√≥dulo
    ‚îÇ   ‚îî‚îÄ‚îÄ cart.js
    ‚îú‚îÄ‚îÄ css/
    ‚îÇ   ‚îî‚îÄ‚îÄ styles.css       # Estilos unificados (2600+ l√≠neas)
    ‚îú‚îÄ‚îÄ static/              # Im√°genes y recursos
    ‚îú‚îÄ‚îÄ index.html           # Login
    ‚îî‚îÄ‚îÄ register.html        # Registro
```

---

## ‚ú® Funcionalidades Implementadas

### üîê Autenticaci√≥n y Seguridad
- ‚úÖ **Login con JWT**: Token Bearer almacenado en LocalStorage
- ‚úÖ **Registro de usuarios**: Validaci√≥n de campos y passwords
- ‚úÖ **Validaci√≥n de sesi√≥n**: Middleware que verifica token en cada p√°gina
- ‚úÖ **Control de roles**: Separaci√≥n de permisos Administrador/Cliente
- ‚úÖ **Logout seguro**: Limpieza de tokens y redirecci√≥n

### üë§ Gesti√≥n de Usuarios (Admin)
- ‚úÖ **CRUD completo** con tabla profesional
- ‚úÖ **B√∫squeda en tiempo real** por nombre/email/rol
- ‚úÖ **Contador din√°mico** de usuarios
- ‚úÖ **Eliminaci√≥n en cascada**: Carrito y Pedidos asociados
- ‚úÖ **Workaround para findById**: Soluci√≥n compatible con Hibernate 6.6
- ‚úÖ **Estados visuales**: Badges de colores por rol
- ‚úÖ **Logging detallado**: Consola con emojis para debugging

### üè∑Ô∏è Gesti√≥n de Roles (Admin)
- ‚úÖ **CRUD completo** con dise√±o de tarjetas (cards)
- ‚úÖ **Grid responsive** adaptable a pantalla
- ‚úÖ **B√∫squeda instant√°nea** por nombre
- ‚úÖ **Estados vac√≠os** con mensajes amigables
- ‚úÖ **√çconos personalizados** por tipo de rol

### üì¶ Gesti√≥n de Categor√≠as (Admin)
- ‚úÖ **CRUD completo** con dise√±o de tarjetas
- ‚úÖ **Grid moderno** con hover effects
- ‚úÖ **B√∫squeda en tiempo real**
- ‚úÖ **Colores distintivos** por categor√≠a
- ‚úÖ **Cascada a productos**: Relaci√≥n OneToMany

### üõçÔ∏è Gesti√≥n de Productos (Admin)
- ‚úÖ **CRUD completo** con tabla profesional
- ‚úÖ **B√∫squeda dual**: Por nombre/ID y categor√≠a
- ‚úÖ **Filtro por categor√≠a**: Dropdown din√°mico
- ‚úÖ **Contador de productos** actualizado en tiempo real
- ‚úÖ **Im√°genes preview**: 60x60px con bordes redondeados
- ‚úÖ **Stock con colores**: Verde (>10), Naranja (1-10), Rojo (0)
- ‚úÖ **Eliminaci√≥n en cascada**: CarritoDetalle y PedidoDetalle
- ‚úÖ **Tags de categor√≠a**: Pills con colores

### üè™ Cat√°logo de Productos (Cliente)
- ‚úÖ **Grid responsive** de productos
- ‚úÖ **B√∫squeda en tiempo real** por nombre
- ‚úÖ **Filtros avanzados funcionales**:
  - üí∞ **Precio**: Slider con display visual + inputs min/max
  - üëü **Tallas**: Checkboxes que buscan en descripci√≥n (35-42)
  - üè∑Ô∏è **Categor√≠as**: Botones en navbar y sidebar
- ‚úÖ **Filtros combinados**: Trabajan simult√°neamente
- ‚úÖ **Bot√≥n "Limpiar Filtros"**: Reset completo con un clic
- ‚úÖ **Modal de detalles**: Vista ampliada del producto
- ‚úÖ **Agregar al carrito**: Integraci√≥n con API
- ‚úÖ **Notificaciones toast**: Feedback visual de acciones
- ‚úÖ **Placeholder para im√°genes**: Fallback autom√°tico
- ‚úÖ **Contador de carrito**: Badge con cantidad de items

### üõí Carrito de Compras (Cliente)
- ‚úÖ **Panel lateral deslizante** con overlay
- ‚úÖ **Lista de items**: Imagen, nombre, precio, cantidad
- ‚úÖ **Actualizar cantidad**: Botones +/- en tiempo real
- ‚úÖ **Eliminar items**: Con confirmaci√≥n
- ‚úÖ **C√°lculo autom√°tico**: Subtotal, IVA (19%), Total
- ‚úÖ **Sincronizaci√≥n**: Actualizaci√≥n tras cada cambio
- ‚úÖ **Animaciones suaves**: Transiciones CSS
- ‚úÖ **Contador en navbar**: Badge actualizado autom√°ticamente

### üìä Dashboard Administrativo
- ‚úÖ **Cards de m√©tricas**: Usuarios, Productos, Categor√≠as, Roles
- ‚úÖ **Navegaci√≥n r√°pida**: Botones a cada m√≥dulo
- ‚úÖ **Dise√±o moderno**: Gradientes y sombras
- ‚úÖ **Men√∫ lateral**: Navegaci√≥n entre m√≥dulos
- ‚úÖ **Bot√≥n de logout**: Siempre visible

### üé® Interfaz de Usuario
- ‚úÖ **Dise√±o responsive**: Desktop, tablet y m√≥vil
- ‚úÖ **Tema coherente**: Paleta de colores unificada
- ‚úÖ **Gradientes modernos**: Efectos visuales atractivos
- ‚úÖ **Hover effects**: Feedback visual en elementos interactivos
- ‚úÖ **Loading states**: Indicadores de carga
- ‚úÖ **Empty states**: Mensajes cuando no hay datos
- ‚úÖ **Error handling**: Mensajes de error amigables

---

## ‚öôÔ∏è Instalaci√≥n y Configuraci√≥n

### Prerequisitos
- Java 17 o superior
- Maven 3.8+
- PostgreSQL 13+ o MySQL 8+
- Navegador web moderno (Chrome, Firefox, Edge)
- Git

### 1Ô∏è‚É£ Clonar el Repositorio
```bash
git clone https://github.com/JuanSe2731/Proyecto-Spring-Boot-E-converse.git
cd Proyecto-Spring-Boot-E-converse
```

### 2Ô∏è‚É£ Configurar Base de Datos

**Opci√≥n A: PostgreSQL (Recomendado)**
```sql
CREATE DATABASE ecommerce_db;
CREATE USER ecommerce_user WITH PASSWORD 'tu_password';
GRANT ALL PRIVILEGES ON DATABASE ecommerce_db TO ecommerce_user;
```

**Opci√≥n B: MySQL**
```sql
CREATE DATABASE ecommerce_db CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
CREATE USER 'ecommerce_user'@'localhost' IDENTIFIED BY 'tu_password';
GRANT ALL PRIVILEGES ON ecommerce_db.* TO 'ecommerce_user'@'localhost';
FLUSH PRIVILEGES;
```

### 3Ô∏è‚É£ Configurar application.properties

Edita `backend/src/main/resources/application.properties`:

**Para PostgreSQL:**
```properties
spring.datasource.url=jdbc:postgresql://localhost:5432/ecommerce_db
spring.datasource.username=ecommerce_user
spring.datasource.password=tu_password
spring.datasource.driver-class-name=org.postgresql.Driver
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect

spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

jwt.secret=tu_clave_secreta_super_segura_minimo_256_bits
jwt.expiration=86400000
```

**Para MySQL:**
```properties
spring.datasource.url=jdbc:mysql://localhost:3306/ecommerce_db?useSSL=false&serverTimezone=UTC
spring.datasource.username=ecommerce_user
spring.datasource.password=tu_password
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.jpa.database-platform=org.hibernate.dialect.MySQL8Dialect

spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

jwt.secret=tu_clave_secreta_super_segura_minimo_256_bits
jwt.expiration=86400000
```

### 4Ô∏è‚É£ Compilar y Ejecutar Backend

```bash
cd backend

# Compilar
./mvnw clean install

# Ejecutar
./mvnw spring-boot:run
```

El servidor estar√° disponible en: `http://localhost:8080`

### 5Ô∏è‚É£ Ejecutar Frontend

**Opci√≥n A: Live Server (VS Code)**
1. Instala la extensi√≥n "Live Server"
2. Click derecho en `index.html` ‚Üí "Open with Live Server"
3. Se abrir√° en `http://localhost:5500` o `http://127.0.0.1:5500`

**Opci√≥n B: Servidor HTTP Python**
```bash
cd frontend
python -m http.server 5500
```

**Opci√≥n C: Servidor HTTP Node.js**
```bash
npx http-server -p 5500
```

### 6Ô∏è‚É£ Datos Iniciales

Al ejecutar por primera vez, **es necesario crear manualmente** en la base de datos:

**Roles iniciales:**
```sql
INSERT INTO rol (nombre) VALUES 
('Administrador'),
('Cliente');
```

**Usuario administrador inicial:**
```sql
-- Password: admin123 (encriptado con BCrypt)
INSERT INTO usuario (nombre, apellido, email, password, telefono, direccion, rol_id) VALUES
('Admin', 'Sistema', 'admin@ecommerce.com', '$2a$10$dXJ3SW6G7P50lGmMkkmwe.20cQQubK3.HZWzG3YB1tlRy.fqvM/BG', '1234567890', 'Oficina Central', 1);
```

**Categor√≠as iniciales:**
```sql
INSERT INTO categoria (nombre) VALUES 
('Deportivos'),
('Casuales'),
('Formales'),
('Running');
```

---

## üéØ Uso del Sistema

### Como Administrador

1. **Login**: `admin@ecommerce.com` / `admin123`
2. **Dashboard**: Visualiza m√©tricas generales
3. **Usuarios**: Gestiona clientes y administradores
4. **Roles**: Crea y edita roles del sistema
5. **Categor√≠as**: Organiza productos por categor√≠as
6. **Productos**: CRUD completo con filtros y b√∫squeda

### Como Cliente

1. **Registro**: Crea tu cuenta desde la p√°gina principal
2. **Login**: Ingresa con tu email y contrase√±a
3. **Cat√°logo**: Navega y filtra productos
4. **Filtros**: 
   - Mueve el slider de precio
   - Selecciona tallas (deben estar en descripci√≥n)
   - Filtra por categor√≠a
5. **Carrito**: Agrega productos y ajusta cantidades
6. **Pedido**: ‚ö†Ô∏è Pendiente de implementaci√≥n

---

## üîí Seguridad Implementada

- ‚úÖ **JWT (JSON Web Tokens)**: Autenticaci√≥n stateless
- ‚úÖ **BCrypt**: Hashing de contrase√±as
- ‚úÖ **CORS**: Configurado para desarrollo local
- ‚úÖ **Roles y permisos**: Separaci√≥n de accesos
- ‚úÖ **Validaci√≥n de sesi√≥n**: En cada petici√≥n al backend
- ‚úÖ **Sanitizaci√≥n de inputs**: Frontend y backend
- ‚úÖ **HttpOnly cookies**: Considerado para producci√≥n

---

## üîß Endpoints API REST

### Autenticaci√≥n (`/auth`)
- `POST /auth/login` - Iniciar sesi√≥n
- `POST /auth/register` - Registrar usuario
- `GET /auth/user-info` - Obtener datos del usuario autenticado

### Usuarios (`/usuario`) üîê Admin
- `GET /usuario/list` - Listar todos
- `GET /usuario/list/{id}` - Buscar por ID
- `POST /usuario/new` - Crear usuario
- `PUT /usuario/update` - Actualizar usuario
- `DELETE /usuario/delete/{id}` - Eliminar usuario

### Roles (`/roles`) üîê Admin
- `GET /roles/list` - Listar todos
- `GET /roles/list/{id}` - Buscar por ID
- `POST /roles/new` - Crear rol
- `PUT /roles/update` - Actualizar rol
- `DELETE /roles/delete/{id}` - Eliminar rol

### Categor√≠as (`/categorias`) üîê Admin
- `GET /categorias/list` - Listar todas
- `GET /categorias/list/{id}` - Buscar por ID
- `POST /categorias/new` - Crear categor√≠a
- `PUT /categorias/update` - Actualizar categor√≠a
- `DELETE /categorias/delete/{id}` - Eliminar categor√≠a

### Productos (`/productos`)
- `GET /productos/list` - Listar todos (p√∫blico)
- `GET /productos/list/{id}` - Buscar por ID (p√∫blico)
- `POST /productos/new` - Crear producto üîê Admin
- `PUT /productos/update` - Actualizar producto üîê Admin
- `DELETE /productos/delete/{id}` - Eliminar producto üîê Admin

### Carrito (`/carrito`) üîê Cliente
- `GET /carrito/mis-items` - Obtener items del carrito
- `POST /carrito/agregar` - Agregar producto
- `PUT /carrito/actualizar/{id}` - Actualizar cantidad
- `DELETE /carrito/eliminar/{id}` - Eliminar item
- `GET /carrito/total` - Calcular total

### Pedidos (`/pedidos`) üîê Cliente
- ‚ö†Ô∏è **Pendiente de implementaci√≥n**

---

## üöß Pendiente de Implementaci√≥n

### Alta Prioridad
- üî≤ **M√≥dulo de Pedidos completo**:
  - Crear pedido desde carrito
  - Historial de pedidos del cliente
  - Estados del pedido (Pendiente, En Proceso, Enviado, Entregado)
  - CRUD de pedidos para administrador
  - Detalles de pedido con items

- üî≤ **Vista de Carrito mejorada**:
  - P√°gina dedicada para el carrito (adem√°s del sidebar)
  - Validaci√≥n de stock antes de proceder al pago
  - C√°lculo de env√≠o
  - Aplicar cupones de descuento

### Media Prioridad
- üî≤ **Dashboard de reportes**:
  - Productos m√°s vendidos
  - Gr√°ficas de ventas por per√≠odo
  - Clientes m√°s activos
  - Ingresos mensuales

- üî≤ **Gesti√≥n de stock**:
  - Alertas de stock bajo
  - Historial de movimientos
  - Ajuste de inventario

- üî≤ **Notificaciones**:
  - Email de confirmaci√≥n de registro
  - Email de confirmaci√≥n de pedido
  - Notificaciones en tiempo real

### Baja Prioridad (Mejoras)
- üî≤ **Recuperaci√≥n de contrase√±a**:
  - Env√≠o de email con token
  - Formulario de reset

- üî≤ **Perfil de usuario**:
  - Editar datos personales
  - Cambiar contrase√±a
  - Historial de compras

- üî≤ **Wishlist (Lista de deseos)**:
  - Guardar productos favoritos
  - Compartir lista

- üî≤ **Rese√±as y valoraciones**:
  - Calificar productos
  - Comentarios de clientes

- üî≤ **B√∫squeda avanzada**:
  - Filtros combinados m√°s complejos
  - Autocompletado
  - B√∫squeda por similitud

---

## üêõ Problemas Conocidos y Soluciones

### ‚úÖ Resueltos

1. **Error findById en Usuario**
   - **Problema**: Hibernate 6.6 devuelve Optional vac√≠o
   - **Soluci√≥n**: Workaround con findAll() + stream()

2. **Error eliminaci√≥n de Usuario**
   - **Problema**: Foreign key constraint de Carrito y Pedido
   - **Soluci√≥n**: Cascada CascadeType.ALL + orphanRemoval

3. **Error eliminaci√≥n de Producto**
   - **Problema**: Foreign key de CarritoDetalle y PedidoDetalle
   - **Soluci√≥n**: @OneToMany con cascade + @JsonIgnore

4. **Error creaci√≥n de Producto**
   - **Problema**: Campo 'estado' no existe en modelo
   - **Soluci√≥n**: Eliminado de BD y c√≥digo

### ‚ö†Ô∏è Por resolver

1. **Sesi√≥n no persiste en refresh**
   - **Problema**: Token se pierde al recargar
   - **Soluci√≥n propuesta**: Verificar localStorage en cada carga

2. **Im√°genes de productos**
   - **Problema**: Rutas relativas no funcionan correctamente
   - **Soluci√≥n temporal**: URLs absolutas o placeholder

---

## üìö Documentaci√≥n Adicional

### Modelo de Base de Datos

**Entidades principales:**
- `Usuario` (1) ‚Üí (N) `Carrito` ‚Üí (N) `CarritoDetalle`
- `Usuario` (1) ‚Üí (N) `Pedido` ‚Üí (N) `PedidoDetalle`
- `Categoria` (1) ‚Üí (N) `Producto`
- `Producto` (1) ‚Üí (N) `CarritoDetalle`
- `Producto` (1) ‚Üí (N) `PedidoDetalle`
- `Rol` (1) ‚Üí (N) `Usuario`

### Convenciones de C√≥digo

**Backend:**
- Nombres de clases: PascalCase
- Nombres de m√©todos: camelCase
- Nombres de variables: camelCase
- Logging con emojis para debugging

**Frontend:**
- Nombres de archivos: kebab-case
- Nombres de funciones: camelCase
- Nombres de variables: camelCase
- Comentarios con emojis para secciones

---

## üë• Equipo de Desarrollo

**Desarrolladores:**
- Juan Sebasti√°n Otero  - 2220053
- Daniel Santiago Convers  - 2221120
- Juan David Paipa  - 2220062
- Jhon Anderson Vargas  - 2220086

**Instituci√≥n:**
- Universidad Industrial de Santander

**Curso:**
- Entornos de Programacion C1

**Per√≠odo:**
- 2025

---

## üìù Licencia

Este proyecto es de car√°cter **acad√©mico** y est√° desarrollado con fines educativos.

---

## üôè Agradecimientos

- Spring Boot Community
- Stack Overflow
- Font Awesome
- PostgreSQL & MySQL Communities
- Todos los profesores y compa√±eros que aportaron feedback

---

## üìû Contacto

Para preguntas o sugerencias sobre el proyecto:

- **GitHub**: [@JuanSe2731](https://github.com/JuanSe2731)

---

## üéì Notas del Proyecto

Este sistema de e-commerce fue desarrollado como proyecto acad√©mico, implementando:
- ‚úÖ Arquitectura MVC completa
- ‚úÖ API REST con Spring Boot
- ‚úÖ Autenticaci√≥n JWT
- ‚úÖ Frontend con JavaScript vanilla
- ‚úÖ Base de datos relacional normalizada
- ‚úÖ CRUD completo para todas las entidades
- ‚úÖ Interfaz responsive y moderna

**Estado actual**: üü° **En desarrollo activo** (85% completado)

Las funcionalidades core est√°n implementadas y funcionando. Pendiente: m√≥dulo completo de pedidos y mejoras en reportes.

---

**‚≠ê Si este proyecto te result√≥ √∫til, no olvides darle una estrella en GitHub!**
